# HRMS Elite Log Rotation Configuration
# This file should be placed in /etc/logrotate.d/hrms-elite

# Application logs
/var/log/hrms-elite/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 hrms hrms
    postrotate
        # Restart the application to reopen log files
        systemctl reload hrms-elite || true
    endscript
}

# Access logs
/var/log/hrms-elite/access.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 hrms hrms
    postrotate
        # Restart nginx to reopen log files
        systemctl reload nginx || true
    endscript
}

# Error logs
/var/log/hrms-elite/error.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 hrms hrms
    postrotate
        # Restart nginx to reopen log files
        systemctl reload nginx || true
    endscript
}

# Security logs
/var/log/hrms-elite/security.log {
    daily
    missingok
    rotate 60
    compress
    delaycompress
    notifempty
    create 600 hrms hrms
    postrotate
        # Restart the application to reopen log files
        systemctl reload hrms-elite || true
    endscript
}

# Database logs
/var/log/hrms-elite/database.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 hrms hrms
    postrotate
        # Restart the application to reopen log files
        systemctl reload hrms-elite || true
    endscript
}

# Monitoring logs
/var/log/hrms-elite/monitoring.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 hrms hrms
    postrotate
        # Restart monitoring services
        systemctl reload prometheus || true
        systemctl reload alertmanager || true
    endscript
}

# Backup logs
/var/log/hrms-elite/backup.log {
    weekly
    missingok
    rotate 12
    compress
    delaycompress
    notifempty
    create 644 hrms hrms
}

# Audit logs (keep longer)
/var/log/hrms-elite/audit.log {
    daily
    missingok
    rotate 90
    compress
    delaycompress
    notifempty
    create 600 hrms hrms
    postrotate
        # Restart the application to reopen log files
        systemctl reload hrms-elite || true
    endscript
} 